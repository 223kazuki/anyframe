function _anyframe-action-execute()
{
  if zle; then
    BUFFER="$*"
    zle accept-line
  else
    eval "$*"
  fi
}

local selected_item="$(cat)"
if [[ -z "$selected_item" ]]; then
  return 1
fi

_anyframe-action-execute "$@" "$selected_item"

# Local Variables:
# mode: Shell-Script
# End:
# vim: ft=zsh
